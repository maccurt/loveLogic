<mat-drawer-container class="mat-drawer-container">
  @if(!store.isLoading()){

  <mat-drawer (closed)="store.showBusinessToggle(false)" mode="push" class="mat-drawe"
    [opened]="store.isBusinessShown()" #drawer>

    <div *ngIf="store.businessSelected()" class="flex-header-footer">
      <header>

        <div class="title-header-grid-drawer">
          <div>
            <span style="text-align: center;">{{store.brandName()}}</span>
          </div>
          <div>
            <button (click)="store.showBusinessToggle(false)" mat-icon-button><mat-icon>close</mat-icon></button>
          </div>
        </div>

      </header>
      <main>
        <section>
          <ll-business [detailMode]="true" [business]="store.businessSelected()"></ll-business>
        </section>

        <section>
          <ll-icon-text-hint [mode]="3" [url]="store.businessSelected().urlInvite"></ll-icon-text-hint>
        </section>

      </main>
      <footer>
        <!-- in the future just toggle the drawer and let the close event handle the store -->
        <button (click)="store.showBusinessToggle(false)" mat-flat-button>Close</button>
      </footer>
    </div>

  </mat-drawer>

  }

  <mat-drawer-content>

    <ll-header-filter></ll-header-filter>


    @if(!store.isLoading()){

    <div class="home-page-grid">

      <section class="business-section">
        <div class="business-grid">
          @for (item of store.businessListFiltered(); track $index) {
          <div>
            <ll-business [compactMode]="store.compactMode()" [business]="item"></ll-business>
          </div>
          }          
        </div>
      </section>

      <section class="marketing-section">
        <ll-marketing></ll-marketing>
      </section>

    </div>  

    }   <!-- isLoading -->


  </mat-drawer-content>
</mat-drawer-container>